<!DOCTYPE html>
<html lang="en">
<head>
    <title>OBJ Loader with Runtime Scale, Translation, and Smooth Shading</title>
    <script type="text/javascript" src="./Common/webgl-utils.js"></script>
    <script type="text/javascript" src="./Common/initShaders.js"></script>
    <script type="text/javascript" src="./Common/MV.js"></script>
    <script type="text/javascript" src="cubo_aula.js"></script> <!-- Use the merged JavaScript file -->
</head>

<body>
    <canvas id="gl-canvas" width="700" height="700">
        Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>

    <input type="file" id="file-input" accept=".obj" multiple><br>
    
    <label for="translations">Initial Translations (e.g., 0,0,0|1,1,1): </label>
    <input type="text" id="translations" value="0,0,0"><br>

    <label for="runtime-translation">Change Translation (index,x,y,z): </label>
    <input type="text" id="runtime-translation" value="0,0,0,0">
    <button onclick="changeTranslation()">Change Translation</button><br>

    <label for="runtime-scale">Change Scale (index,scale): </label>
    <input type="text" id="runtime-scale" value="0,1">
    <button onclick="changeScale()">Change Scale</button><br>

    <!-- Camera Control Sliders -->
    <h3>Camera Controls</h3>
    Translate: 
    <input type="range" id="translate-slider" min="1" max="10" step="0.1" value="5"><br>
    
    Rotate Y: 
    <input type="range" id="rotate-y-slider" min="-180" max="180" step="1" value="0"><br>
    
    Rotate X: 
    <input type="range" id="rotate-x-slider" min="-90" max="90" step="1" value="0"><br>

    FOV: 
    <input type="range" id="fov-slider" min="1" max="179" step="1" value="45"><br>

    Aspect Ratio: 
    <input type="range" id="aspect-slider" min="0.1" max="10.0" step="0.1" value="1"><br>

    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec3 vNormal;
        varying vec4 fColor;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform vec3 translation;
        uniform float scale;
        void main() {
            vec3 lightDirection = normalize(vec3(1.0, 1.0, 1.0));
            vec3 normal = normalize(vNormal);
            float diffuse = max(dot(normal, lightDirection), 0.0);
            fColor = vec4(vec3(0.3) * diffuse, 1.0); // Dark grey color with diffuse lighting
            gl_Position = projectionMatrix * modelViewMatrix * vec4((vPosition.xyz * scale) + translation, 1.0);
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        varying vec4 fColor;
        void main() {
            gl_FragColor = fColor; // Use the color from the vertex shader
        }
    </script>
</body>
</html>

